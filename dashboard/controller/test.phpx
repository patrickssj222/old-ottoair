<?php
class ControllerTest extends Controller {

    // Autoload. Make sure to pass in $registry to __construct()
    public function __construct($registry = array()) {
        parent::__construct($registry);
        echo('Controller Test loaded' . '<br/>');
    }

    // if no method name is present, index is called
    public function index() {
        // Load model
        $this->load->model('test');

        // Load language
        $this->load->language('test', 'en-gb');

        // Model sets variables
        $this->model_test->test();

        // Retrieve variable $a. Notice $a (shared) is set in model but never returned
        // to controller, yet controller can still retrieve it
        $data['a'] = $this->a;
        echo('Controller Test is printing shared $a:' . $this->a . '<br/>');

        // Get a returned variable from model
        $d = $this->model_test->test2();
        echo('Controller Test is printing returend $d:' . $d . '<br/>');

        // Debug print
        // var_export('Controller Test is printing itself (methods are obmitted):' . '<br/>' );
        // var_dump($this);

        // Render but capture output into $data['c']. Notice we've been buliding array $data along
        // the way. Now we are finally passing $data into a view
        $data['c'] = $this->load->view('test/test', $data, CAPTURE_RESULT);

        // Render and stream
        $b = $this->load->view('test', $data);
    }
}